# Check the device codename using getprop
DEVICE_CODENAME=$(getprop ro.product.device)

if [ "$DEVICE_CODENAME" = "nabu" ]; then
    echo "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
    echo "WinInstaller for Xiaomi Pad 5 ($DEVICE_CODENAME)"
    echo "this script is Written and Made By ArKT, Telegram - '@ArKT_7', Github - 'ArKT-7'"
    echo ""
    echo "Based on Kumar_Jy's Wininstaller, Telegram - '@Kumar_Jy', Github - 'Kumar-Jy'"
    echo ""
elif [ "$DEVICE_CODENAME" = " beryllium" ]; then
    echo "test for TOUCH"
    echo "WinInstaller for Poco F1 ($DEVICE_CODENAME)"
    echo "this script is Written and Made By ArKT, Telegram - '@ArKT_7', Github - 'ArKT-7'"
    echo ""
    echo "Based on Kumar_Jy's Wininstaller, Telegram - '@Kumar_Jy', Github - 'Kumar-Jy'"
    echo ""
elif [ "$DEVICE_CODENAME" = "dm3q" ]; then
    echo "test for other device"
    echo "WinInstaller for Samsung S23 Ultra ($DEVICE_CODENAME)"
    echo "this script is Written and Made By ArKT, Telegram - '@ArKT_7', Github - 'ArKT-7'"
    echo ""
    echo "Based on Kumar_Jy's Wininstaller, Telegram - '@Kumar_Jy', Github - 'Kumar-Jy'"
    echo ""
else
    echo ""
    echo "This device is not supported yet. Please contact the developer on Telegram @ArKT_7"
    echo "Device - $DEVICE_CODENAME"
    echo ""
    exit 1
fi

# Panel detection logic
su -c 'if cat /proc/cmdline | grep -q "dsi_ebbg_fhd_ft8719_video_display"; then \
  echo "EBBG panel detected"; \
elif cat /proc/cmdline | grep -q "dsi_tianma_fhd_nt36672a_video_display"; then \
  echo "Tianma panel detected"; \
else \
  panel=$(cat /proc/cmdline | grep -Eo "j20s_42|k82_42|j20s_36|k82_36"); \
  case $panel in \
    "j20s_42"|"k82_42") \
      echo "Huaxing panel detected"; \
      ;; \
    "j20s_36"|"k82_36") \
      echo "Tianma panel detected"; \
      ;; \
    *) \
      echo "Unknown panel, detection failed"; \
      ;; \
  esac; \
fi'
